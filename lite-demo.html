<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>LiteShimKernel Demo</title>
  </head>
  <body>
    <h1>LiteShimKernel â†’ /chat demo</h1>

    <textarea id="code" rows="4" cols="80">
Write a Python function that adds two numbers and explain it briefly.
    </textarea>
    <br />
    <button id="run-btn">Run</button>

    <h2>Result</h2>
    <pre id="output"></pre>

    <script type="module">
      import "./dist/browser-demo.js";

      const runBtn = document.getElementById("run-btn");
      const codeEl = document.getElementById("code");
      const outputEl = document.getElementById("output");

      runBtn.addEventListener("click", async () => {
        outputEl.textContent = "Running...";
        try {
          // @ts-ignore: we attached this in browser-demo.ts
          const result = await window.liteKernelExecute(codeEl.value);

          // result is whatever LiteShimKernel.execute returns.
          // For now we expect something like { "text/plain": "..." }
          if (result && result["text/plain"]) {
            outputEl.textContent = result["text/plain"];
          } else {
            outputEl.textContent = JSON.stringify(result, null, 2);
          }
        } catch (err) {
          console.error(err);
          outputEl.textContent = "Error: " + (err?.message ?? String(err));
        }
      });
    </script>
  </body>
</html>
